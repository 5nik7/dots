#!/usr/bin/env bash

declare -r esc=$'\033'
declare -r c_reset="${esc}[0m"
declare -r bold="${esc}[1m"
declare -r dim="${esc}[2m"
declare -r italic="${esc}[3m"
declare -r underline="${esc}[4m"
declare -r rev="${esc}[7m"
declare -r fg_red="${esc}[1;31m"
declare -r fg_green="${esc}[1;32m"
declare -r fg_yellow="${esc}[1;33m"
declare -r fg_blue="${esc}[1;34m"
declare -r fg_magenta="${esc}[1;35m"
declare -r fg_cyan="${esc}[1;36m"
declare -r fg_white="${esc}[1;37m"
declare -r trash=""
declare -r errico=""
declare -r trashcolor="${fg_green}"

rmed() {
  local targetpath="$(realpath "$@")"
  local targetdir="$(dirname "$targetpath" | sed "s|^${HOME}|~|")"
  local targetname="$(basename "$targetpath")"
  printf " ${trashcolor}${trash}${trashcolor} ${dim}<-${c_reset} ${targeticon} ${fg_blue}%s${targetcolor}${bold}%s${c_reset}\n" "$targetdir/" "$targetname"
}

error() {
  local targetpath="$(realpath "$@")"
  local targetdir="$(dirname "$targetpath" | sed "s|^${HOME}|~|")"
  local targetname="$(basename "$targetpath")"
  printf " ${fg_red}${errico} ${fg_magenta}%s/${bold}%s${c_reset}${fg_red} does not exist${c_reset}\n" "$targetdir" "$targetname"
}

echo
for target in "$@"; do
  if [ -f "$target" ]; then
    targetcolor="${c_reset}"
    targeticon="󰡯"
    command rm -f "$target"
    rmed "$target"
  elif [ -d "$target" ]; then
    targetcolor="${fg_blue}"
    targeticon="${fg_blue}${c_reset}"
    command rm -fr "$target"
    rmed "$target"
  else
    error "$target"
  fi
done
echo
